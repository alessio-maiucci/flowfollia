<!DOCTYPE html>
<html lang="en">
<head>
	<title>FlowFollia</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" type="text/css" href="./js/slick/slick.css" />
    <link
      rel="stylesheet"
      type="text/css"
      href="./assets/dist/css/bootstrap.min.css"
    />
    <link rel="stylesheet" type="text/css" href="./js/slick/slick-theme.css" />
    <link rel="stylesheet" type="text/css" href="./css/interno.css" />
    <link rel="stylesheet" type="text/css" href="./css/fioriere.css" />
    <script src="./assets/dist/js/bootstrap.bundle.min.js"></script>
    <script src="./js/jquery-3.7.1.min.js"></script>
    <script src="./js/slick/slick.js"></script>
    <script src="./js/funzioni.js"></script>
    <script src="./js/dati.js"></script>

    <style>
      /* INIZIO Fix generale per rendere la pagina ad altezza 100% dello schermo e per far andare il footer in basso */
      html,
      body {
        /*min-height: 100vh;
        height: max-content;*/
        height: 100%;
      }

      /* Questa regola permette di abilitare la successiva */
      body {
        display: flex;
        flex-direction: column;
      }

      /* Questa regola spinge il footer in basso - se non avessimo messo display: flex sul body non sarebbe stato possibile applicarla */
      .footer {
        margin-top: auto;
      }
      /* FINE Fix generale per rendere la pagina ad altezza 100% dello schermo e per far andare il footer in basso */

      /* INIZIO Fix nell'header */
      .container-fluid.fissato-alto.header {
        min-width: 0;
        padding: 8px 12px;
      }

      .row.barra-intermedia {
        justify-content: space-between;
      }

      .logo {
        height: max-content;
      }

      .logo img {
        object-fit: contain;
        width: 40px;
        height: 40px;
      }

      .row:after {
        content: none;
      }
      /* FINE Fix nell'header */

      /* INIZIO Fix nelle .column */
      .column.side-sx,
      .column.side-dx {
        display: none;
      }

      .column.middle {
        width: 100%;
        height: auto;
      }

      @media screen and (min-width: 1366px) {
        .column.side-sx,
        .column.side-dx {
          display: block;
          height: auto;
        }

        .column.middle {
          width: 80%;
          height: auto;
        }
      }

      .column {
        height: max-content;
      }
      /* FINE Fix nelle .column */

      /* INIZIO Riduciamo un pò il margine tra le slide */
      .slick-slide {
        margin: 0 6px;
      }
      /* FINE Riduciamo un pò il margine tra le slide */

      /* INIZIO Facciamo vedere una frazione della slide successiva nella visuale mobile */
      .slick-list {
        padding: 0 20% 0 0;
      }

      @media screen and (min-width: 480px) {
        .slick-list {
          padding: 0;
        }
      }
      /* FINE Facciamo vedere una frazione della slide successiva nella visuale mobile */
    </style>

    <style>
      .container-fiori {
        position: relative;
        width: 140px;
        height: 140px;
        background-color: transparent;
        top: 23px;
        left: 20px;
      }

      .container-fiori-6 {
        position: relative;
        width: 210px;
        height: 122px;
        background-color: transparent;
        top: 23px;
        left: 18px;
      }

      .container-fiori-9 {
        position: relative;
        width: 170px;
        height: 170px;
        background-color: transparent;
        top: 4px;
        left: 14px;
      }

      .container-fiori-1 {
        position: relative;
        width: 140px;
        height: 140px;
        background-color: transparent;
        top: 57px;
        left: 73px;
      }

      .container-fiori-5 {
        position: relative;
        width: 140px;
        height: 140px;
        background-color: transparent;
        top: 48px;
        left: 42px;
      }

      .button-container {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
      }

      .button-container-9 {
        position: absolute;
        top: 14px;
        left: 1px;
        width: 100%;
        height: 100%;
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
      }

      .button-container-1 {
        position: absolute;
        top: 14px;
        left: 1px;
        width: 100%;
        height: 100%;
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
      }

      .button-container-5 {
        position: absolute;
        top: -19px;
        left: -8px;
        width: 100%;
        height: 100%;
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
      }

      .button-fiori {
        width: calc(49% - 2px);
        height: calc(49% - 4px);
        background-color: #906c42;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        text-align: center;
        position: relative;
      }
	  
      .button-fiori-6 {
        width: calc(33% - 2px);
        height: calc(49% - 4px);
        background-color: #906c42;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        text-align: center;
        position: relative;
      }

      .button-fiori-9 {
        width: calc(33% - 2px);
        height: calc(33% - 4px);
        background-color: #906c42;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        text-align: center;
        position: relative;
      }

      .button-fiori-1 {
        width: calc(45% - 2px);
        height: calc(45% - 4px);
        background-color: #906c42;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        text-align: center;
        position: relative;
      }

      .button-fiori-5 {
        width: 45px;
        height: 45px;
        background-color: #906c42;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        text-align: center;
        position: relative;
        margin: 2px;
      }

      .wrapper {
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .fiore-placeholder {
        height: 50px;
        width: 50px;
        position: absolute;
        top: 50%;
        left: 50%;
        right: 0;
        bottom: 0;
        -webkit-transform: translate(-50%, -50%);
        -moz-transform: translate(-50%, -50%);
        -ms-transform: translate(-50%, -50%);
        -o-transform: translate(-50%, -50%);
        transform: translate(-50%, -50%);
      }
    </style>

    <script>
      var cp_butt;
      var to_butt;
      function allowDrop(ev) {
        ev.preventDefault();
      }

      function drag(ev) {
        //cp_butt=$('#'+ev.target.id).closest('button').html();
        cp_butt = $("#" + ev.target.id).attr("src");
        console.log("drag " + cp_butt);

        //  ev.dataTransfer.setData("text", ev.target.id);
      }

      function drop(ev) {
        console.log("drop " + ev.target.id);
        $("#" + ev.target.id).attr("src", cp_butt);
        ev.preventDefault();
      }
    </script>
  </head>

<body>

	<script type="text/javascript">
		$(document).ready(function () {
		  //initDatiFioriera();
		  //fillContainerFioriera('button_container');
		  initDatiFioriera();
		  initDatiTabella();
		  fillSlider1('id_slider_fioriere',1);
		  fillTabella('tabella_fioriere',1);
		  checkLogin();
		  getcarrello();
		  $(".regular").slick({
			dots: true,
			infinite: true,
			slidesToShow: 5,
			slidesToScroll: 5,
			responsive: [
			  {
				breakpoint: 1366,
				settings: {
				  slidesToShow: 4,
				  slidesToScroll: 4,
				},
			  },
			  {
				breakpoint: 1024,
				settings: {
				  slidesToShow: 3,
				  slidesToScroll: 3,
				},
			  },
			  {
				breakpoint: 768,
				settings: {
				  slidesToShow: 2,
				  slidesToScroll: 2,
				},
			  },
			  {
				breakpoint: 480,
				settings: {
				  dots: false,
				  slidesToShow: 1,
				  slidesToScroll: 1,
				},
			  },
			],
		  });
		});
	</script>

	<div class="container-fluid fissato-alto header" id="cg-header">
			<div class="fade collapse show" id="nascondimenu">
				<div class="row barra-intermedia">
					<div class="col-auto cg-main-logo logo d-flex">
						<img src="./immagini/logo.png" height="70" width="70">
					</div>
					<div class="blocco-header bottoni-login" style="max-width: 18rem;">
						<div id="id_span_loggato" class="bottone bottone-login bottone-registrazione hideme" >
							<span style="color: white;">Benvenuto </span> <span id="id_span_username" style="color: white;">AA</span>
						  </div>
						<button type="button" class="btn btn-primary mx-1 hideme" id="id_span_logout" style="background-color: #4f3a23; border:#4f3a23" onclick="logout()">Logout</button>	
						<button type="button" class="btn btn-primary mx-1" id="id_span_login" style="background-color: #4f3a23; border:#4f3a23" onclick="apri_modal_login()">Login</button>
						<button type="button" class="btn btn-primary mx-1" id="id_span_registrati" style="background-color: #4f3a23; border:#4f3a23" onclick="apri_modal_registrati()">Registrati</button>
						<a href="./Carrello.html">
							<button type="button" class="btn btn-primary mx-1 carrello" id="id_carrello" style="background-color: #4f3a23; border:#4f3a23;">
								<img src="./immagini/cart3.svg">
							</button>
						</a>
					</div>
				</div>
			</div>
	</div>

	<div class="row">
	<div class="column side-sx"></div>
	<div class="column middle" style="background-color:#ffffff;">

		<div class="row-2">
			<div class="column side-sx-2"><img src="./immagini/ghirigoro_fioriera_sx.JPG" style="float:left;"></div>
			<div class="column middle-2"><h2 style="margin-top: 20px">Crea la tua fioriera</h2></div>
			<div class="column side-dx-2"><img src="./immagini/ghirigoro_fioriera_dx.JPG" style="float:right;"></div>
		</div>
			<div class="regular slider" id="id_slider_fioriere">
				<!--riempito dalle funzioni di fill-->
			</div>

			<div class="scelta_fioriera hideme" id="id_scelta_fioriera">
				<div class="row-5">
					<div class="column" style="background-color: #ffffff">
					 <!-- inizio placeholder fioriere -->
					 <div id="id_mostra_vaso_img_4" style="height: 180px; width: 180px" class="hideme">
						<div class="container-fiori">
						  <div class="button-container" id="button_container">
							<button class="button-fiori" ondrop="drop(event)" ondragover="allowDrop(event)" ><img id="id_img_to_4_1" name="fioriera4" src="./immagini/flower1.svg" class="fiore-placeholder" /></button>
							<button class="button-fiori" ondrop="drop(event)" ondragover="allowDrop(event)" ><img id="id_img_to_4_2" name="fioriera4" src="./immagini/flower1.svg" class="fiore-placeholder" /></button>
							<button class="button-fiori" ondrop="drop(event)" ondragover="allowDrop(event)" ><img id="id_img_to_4_3" name="fioriera4" src="./immagini/flower1.svg" class="fiore-placeholder" /></button>
							<button class="button-fiori" ondrop="drop(event)" ondragover="allowDrop(event)" ><img id="id_img_to_4_4" name="fioriera4" src="./immagini/flower1.svg" class="fiore-placeholder" /></button>
						  </div>
						</div>
					  </div>
							<div id="id_mostra_vaso_img_6" style="height: 180px; width: 245px" class="hideme">
						<div class="container-fiori-6">
						  <div class="button-container-1" id="button_container">
							<button class="button-fiori-6" ondrop="drop(event)" ondragover="allowDrop(event)" ><img id="id_img_to_6_1" name="fioriera6" src="./immagini/flower1.svg"  class="fiore-placeholder" /></button>
							<button class="button-fiori-6" ondrop="drop(event)" ondragover="allowDrop(event)" ><img id="id_img_to_6_2" name="fioriera6" src="./immagini/flower1.svg"  class="fiore-placeholder" /></button>
							<button class="button-fiori-6" ondrop="drop(event)" ondragover="allowDrop(event)" ><img id="id_img_to_6_3" name="fioriera6" src="./immagini/flower1.svg"  class="fiore-placeholder" /></button>
							<button class="button-fiori-6" ondrop="drop(event)" ondragover="allowDrop(event)" ><img id="id_img_to_6_4" name="fioriera6" src="./immagini/flower1.svg"  class="fiore-placeholder" /></button>
							<button class="button-fiori-6" ondrop="drop(event)" ondragover="allowDrop(event)" ><img id="id_img_to_6_5" name="fioriera6" src="./immagini/flower1.svg"  class="fiore-placeholder" /></button>
							<button class="button-fiori-6" ondrop="drop(event)" ondragover="allowDrop(event)" ><img id="id_img_to_6_6" name="fioriera6" src="./immagini/flower1.svg"  class="fiore-placeholder" /></button>
						  </div>
						</div>
					  </div>
							<div id="id_mostra_vaso_img_9" style="height: 200px; width: 200px" class="hideme">
						<div class="container-fiori-9">
						  <div class="button-container-9" id="button_container">
												<button class="btn button-fiori-9" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="id_img_to_9_1" name="fioriera9" src="./immagini/flower1.svg" width="100%"></button>
												<button class="btn button-fiori-9" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="id_img_to_9_2" name="fioriera9" src="./immagini/flower1.svg" width="100%"></button>
												<button class="btn button-fiori-9" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="id_img_to_9_3" name="fioriera9" src="./immagini/flower1.svg" width="100%"></button>
												<button class="btn button-fiori-9" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="id_img_to_9_4" name="fioriera9" src="./immagini/flower1.svg" width="100%"></button>
							          <button class="btn button-fiori-9" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="id_img_to_9_5" name="fioriera9" src="./immagini/flower1.svg" width="100%"></button>
												<button class="btn button-fiori-9" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="id_img_to_9_6" name="fioriera9" src="./immagini/flower1.svg" width="100%"></button>
												<button class="btn button-fiori-9" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="id_img_to_9_7" name="fioriera9" src="./immagini/flower1.svg" width="100%"></button>
												<button class="btn button-fiori-9" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="id_img_to_9_8" name="fioriera9" src="./immagini/flower1.svg" width="100%"></button>
												<button class="btn button-fiori-9" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="id_img_to_9_9" name="fioriera9" src="./immagini/flower1.svg" width="100%"></button>									
						  </div>
						</div>
					  </div>
					  <div id="id_mostra_vaso_img_1" style="height: 200px; width: 200px" class="hideme">
						<div class="container-fiori-1">
						  <div class="button-container-1" id="button_container">
												<button class="btn button-fiori-1" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="id_img_to_1_1" name="fioriera1" src="./immagini/flower1.svg" width="100%"></button>
						  </div>
						</div>
					  </div>
					  <div id="id_mostra_vaso_img_5" style="height: 200px; width: 200px" class="hideme">
						  <div class="container-fiori-5">
							<div class="button-container-5" id="button_container">
							<div class="wrapper">
							  <button class="btn button-fiori-5" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="id_img_to_5_1" name="fioriera5" src="./immagini/flower1.svg" width="100%"></button>
							  <button class="btn button-fiori-5" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="id_img_to_5_2" name="fioriera5" src="./immagini/flower1.svg" width="100%"></button>
							</div>
							<div class="wrapper">
							  <button class="btn button-fiori-5" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="id_img_to_5_3" name="fioriera5" src="./immagini/flower1.svg" width="100%"></button>
							</div>
							<div class="wrapper">
							  <button class="btn button-fiori-5" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="id_img_to_5_4" name="fioriera5" src="./immagini/flower1.svg" width="100%"></button>
							  <button class="btn button-fiori-5" ondrop="drop(event)" ondragover="allowDrop(event)"><img id="id_img_to_5_5" name="fioriera5" src="./immagini/flower1.svg" width="100%"></button>									
							</div>
							</div>
						  </div>
					  </div>              

					  <!-- fine placeholder fioriere -->	
					</div>
				</div>
				<div class="row-3">
					<div id="tabella_fioriere"
					  class="column w-100 griglia-fiori"
					  style="background-color: #ffffff">
					  <!-- riempito dalle funzioni di fill-->
					</div>
				  </div>
				<div class="row-4">
						<div class="pulsanti" style="text-align: center; margin-top: 20px;">
							<a href="./CreaFIoriera.html"><button type="button" class="btn btn-primary mx-1" style="background-color: rgb(114, 114, 114); border: rgb(114, 114, 114);">Indietro</button></a>
              <a href="javascript:void()"><button type="button" class="btn btn-primary" style="background-color: #006b20; border: #006b20" onclick="inserisciFlowfolliaCarrello('B')">Aggiungi al carrello</button></a>
						</div>			
				</div>
			</div>
			
			<div class="container" id="container_indietro" style="text-align: center;">
				<a href="./FlowFollia.html"><button type="button" class="btn btn-primary mx-1" style="background-color: rgb(114, 114, 114); border: rgb(114, 114, 114); margin-top: 10px;">Indietro</button></a>
			</div>
	</div>

	<div class="column side-dx"></div>
	</div>
	<div class="footer">
		<p><b>Alessio e Denise</b></p>
		<p><b>numero di telefono:</b> 06-1234567 <b>email:</b> FlowFollia@gmail.com</p>
	</div>

	<!--modal-->
	<div class="modal fade" id="id_modal_registrazione" tabindex="-1" role="dialog" aria-hidden="true">
		<div class="modal-dialog" role="document">
		  <div class="modal-content">
			<div class="modal-header">
			  <h5 class="modal-title">Registrazione</h5>
			  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
				<span aria-hidden="true">&times;</span>
			  </button>
			</div>

			<div class="modal-body" style="background-image: url('./immagini/form7.jpg');">
				<form action="./php/registrazione.php" method="post" name="registr" style="text-align: center;">
					<input type="text" name="cognome" size="30" maxlength="40" id="id_cognome_registrazione" placeholder="Cognome:" required><br><br>
					<input type="text" name="nome" size="30" maxlength="30" id="id_nome_registrazione" placeholder="Nome:" required><br><br>
					<input type="username" name="username" size="30" maxlength="15" id="id_username_registrazione" placeholder="Username:" required><br><br>
					<input type="email" name="email" size="30" maxlength="30" id="id_email_registrazione" placeholder="Email:" required><br><br>
					<input type="password" name="password" size="30" maxlength="20" id="id_password_registrazione" placeholder="Password:" required><br><br>
					<input type="password" name="conferma_password" size="30" maxlength="20" id="id_conferma_password_registrazione" placeholder="Conferma Password:" required><br><br>
					<button type="button" class="btn btn-secondary" data-dismiss="modal" id="id_registrazione_chiudi" onclick="chiudi_modal_registrati()">Chiudi</button>
					<input type="submit" class="btn btn-primary" style="background-color: #006b20; border:#006b20" name="REGISTRATI" value="registrati">
				</form>
			</div>
		  </div>
		</div>
	</div>

	<div class="modal fade" id="id_modal_login" tabindex="-1" role="dialog" aria-hidden="true">
		<div class="modal-dialog" role="document">
		  <div class="modal-content">
			<div class="modal-header">
			  <h5 class="modal-title">Login</h5>
			  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
				<span aria-hidden="true">&times;</span>
			  </button>
			</div>
			<div class="modal-body" style="background-image: url('./immagini/form7.jpg')">
			  <form method="post" onsubmit="return login()" style="text-align: center;">
				<!-- <form method="post" action="./php/login.php" style="text-align: center;"> -->
				<input type="username" name="username" size="30" maxlength="15" id="id_username_login" placeholder="Username:" required><br><br>
				<input type="password" name="password" size="30" maxlength="20" id="id_password_login" placeholder="Password:" required><br><br>
				<button type="button" class="btn btn-secondary" data-dismiss="modal" id="id_login_chiudi" onclick="chiudi_modal_login()">Chiudi</button>
				<input type="submit" class="btn btn-primary" style="background-color: #006b20; border:#006b20" name="LOGIN" value="Login">
			  </form>
			</div>
		  </div>
		</div>
	  </div>
	
		<!-- modal alert per gestire errori al posto di alert -->
		<div id="id_modal_alert" class="modal fade bd-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" style="display: none;" aria-hidden="true">
		  <div class="modal-dialog modal-sm">
			<div class="modal-content">
			  <div class="modal-header">
				<h5 class="modal-title h4" id="mySmallModalLabel"><span id="id_modal_alert_titolo"></span></h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
				  <span aria-hidden="true"></span>
				</button>
			  </div>
			  <div class="modal-body">
				<span id="id_modal_alert_msg"></span>
			  </div>
			</div>
		  </div>
		</div>  

</body>
</html>